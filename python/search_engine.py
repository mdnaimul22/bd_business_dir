import re

DOMAIN_MAP = {
    # High frequency terms (40+)
    'pipe': ['পাইপ', 'পাঈপ'],
    'ss': ['এস এস', 'এস-এস'],
    'sheet': ['সিট', 'সীট', 'শিট', 'শীট'],
    'machine': ['মেশিন', 'মেশীন', 'মেসিন',  'মেসীন'],

    # Common industrial terms (20-39)
    'motor': ['মটর', 'মোটর'], 
    'fitting': ['ফিটিং', 'ফিটিঙ', 'ফিটিংস'], 
    'old': ['পুরাতন', 'পুরাতনী', 'পুরান', 'ওল্ড'], 
    'pump': ['পাম্প', 'পাম'],
    'rod': ['রড', 'রড্'], 
    'shaft': ['স্যাফট', 'শ্যাফট'], 
    'belt': ['বেল্ট', 'বেল্টস'],

    # Technical & Material terms (10-19)
    'boiler': ['বয়লার', 'বয়েলার'], 
    'and': ['এন্ড', 'অ্যান্ড'], 
    'ss-material': ['এস-এস', 'এসএস'], 
    'gear': ['গিয়ার', 'গীয়ার'],
    'ms': ['এম-এস', 'এমএস'], 
    'pneumatic': ['নিউমেটিক', 'নিউম্যাটিক'], 
    'new': ['নতুন', 'নিউ'], 
    'bolt': ['বোল্ট', 'বল্টু'],
    'gas': ['গ্যাস', 'গ্যাশ'], 
    'rubber': ['রাবার', 'রবার'], 
    'tools': ['টুলস', 'টুলস্'], 
    'parts': ['পার্টস', 'পার্টস্'],
    'milling': ['মিলিং', 'মিলিঙ'], 
    'plate': ['প্লেট', 'প্লেটস্'], 
    'bush': ['বুশ', 'বুস'], 
    'chain': ['চেইন', 'চেন'],
    'bearing': ['বেয়ারিং', 'বিয়ারিং', 'বেয়ারিঙ', 'বিয়ারিঙ'], 
    'brass': ['পিতল', 'ব্রাস'], 
    'mill': ['মিল', 'মীল'], 
    'welding': ['ওয়েল্ডিং', 'ওয়েল্ডিঙ', 'ঝালাই'],
    'spring': ['স্প্রিং', 'স্প্রিঙ', 'স্প্রিংস'], 
    'plastic': ['প্লাস্টিক', 'প্লাস্টীক'],

    # Specialized terms (5-9)
    'steam': ['স্টিম', 'বাষ্প'], 
    'sale': ['বিক্রয়', 'বিক্রি', 'সেল'], 
    'nut': ['নাট', 'নাট-বোল্ট'], 
    'die': ['ডাই', 'ডাইস'],
    'generator': ['যেনারেটর', 'জেনারেটর', 'জেনারেটার'], 
    'fire': ['ফায়ার', 'আগুন'], 
    'cutting': ['কাটিং', 'কাটিঙ'],
    'flatbar': ['ফ্লাটবার', 'ফ্ল্যাটবার'], 
    'copper': ['তামা', 'কপার'], 
    'teflon': ['টেফলন', 'টেফ্লন'],
    'pvc': ['পিভিসি', 'পি-ভি-সি'], 
    'screw': ['স্ক্রু', 'স্ক্রু-ড্রাইভার'], 
    'roller': ['রোলার', 'রুলার'], 
    'angle': ['এঙ্গেল', 'এঙগেল'],
    'iron': ['লোহা', 'আয়রন'], 
    'aluminum': ['এলুমিনিয়াম', 'অ্যালুমিনিয়াম'], 
    'wire': ['ওয়্যয়ার', 'ওয়্যার', 'তার'], 
    'air': ['এয়ার', 'বাতাস'],
    'buy': ['ক্রয়', 'কেনা', 'বাই'], 
    'grinding': ['গ্রাইন্ডিং', 'গ্রান্ডিঙ', 'গ্রাইন্ডিঙ'], 
    'drill': ['ড্রিল', 'ড্রিলিং'], 
    'lathe': ['লেদ', 'লেদ-মেশিন'],
    'shaper': ['সেপার', 'শেপার'], 
    'cutter': ['কাটার', 'কাটিং'], 
    'cnc': ['সিএন্ডসি', 'সিএনসি'], 
    'power': ['পাওয়ার', 'শক্তি'],
    'compressor': ['কম্প্রেসার', 'কম্প্রেসর'], 
    'textile': ['টেক্সটাইল', 'কাপড়'], 
    'ball': ['বল', 'বল-বেয়ারিং'],
    'steel': ['স্টিল', 'ইস্পাত'], 
    'silicon': ['সিলিকন', 'সিলিকন-কার্বাইড'], 
    'nylon': ['নাইলন', 'নাইলন-দড়ি'], 
    'diesel': ['ডিজেল', 'ডিযেল'],
    'machinery': ['মেশিনারি', 'মেসিনারি'], 
    'importer': ['ইম্পোর্টার', 'আমদানিকারক'], 
    'heater': ['হিটার', 'হিটিং'],
    'blower': ['ব্লুসার', 'ব্লুয়ার'], 
    'cement': ['সিমেন্ট', 'সিমেন্ট-মিক্সার'], 
    'powder': ['পাউডার', 'পাওয়ার'],
    'channel': ['চ্যানেল', 'চ্যানেল-আয়রন'], 
    'ship': ['জাহাজ', 'যাহায'], 
    'nickel': ['নিকেল', 'নিকেলিং'], 
    'carbon': ['কার্বন', 'কয়লা'],

    # Brand & Functional (4-5)
    'hydraulics': ['হাইড্রলিক্স', 'হাইড্রোলিক্স'], 
    'repair': ['মেরামত', 'রিপেয়ার', 'সার্ভিসিং'], 
    'electric': ['ইলেক্ট্রিক', 'বৈদ্যুতিক', 'ইলেক্ট্রিক্যাল'],
    'engine': [' ইঞ্জিন', 'ইঞ্জিন', 'ইঞ্যিন'], 
    'surface': ['সারফেস', 'সার্ফেস'], 
    'industrial': ['ইন্ডাস্ট্রিয়াল', 'শিল্প'],
    'water': ['ওয়াটার', 'পানি'], 
    'seller': ['বিক্রেতা', 'বিক্রেতা', 'সেলার'], 
    'jute': ['জুট', 'পাট'], 
    'dies': ['ডাইস', 'ডাই'],
    'flange': ['ফ্ল্যাঞ্জ', 'ফ্লান্স', 'ফ্ল্যাঞ্জেস'], 
    'pressure': ['প্রেসার', 'চাপ'], 
    'gauge': ['গেজ', 'গেয'],
    'injection': ['ইনজেকশন', 'ইনজেকসন'], 
    'hydraulic': ['হাইড্রলিক', 'হাইড্রোলিক'], 
    'switch': ['সুইচ', 'সুইজ'],
    'spare': ['স্পেয়ার', 'খুচরা যন্ত্রাংশ'], 
    'allen': ['এলেন', 'অ্যালেন'], 
    'supplier': ['সরবরাহকারী', 'সাপ্লায়ার'],

    # Recently Repaired & Additional Terms (2-4)
    'castable': ['কাস্টবল', 'কাস্টেবল'], 
    'planner': ['প্লেনার', 'প্ল্যানার'], 
    'tissue': ['টিস্যু', 'টিসু'],
    'bag': ['ব্যাগ', 'ব্যাগস'], 
    'casting': ['কাস্টিং', 'কাস্টিঙ', 'ঢালাই' 'সিআই', 'সি-আই'], 
    'zinc': ['দস্তা', 'জিঙ্ক', 'জিংক'], 
    'lead': ['সিসা', 'সীসা', 'লিড'],
    'square': ['স্কয়ার', 'স্কোয়ার'], 
    'ring': ['রিং', 'রিঙ'], 
    'coil': ['কয়েল', 'কোয়েল'], 
    'packing': ['প্যাকিং', 'প্যাকিঙ'],
    'hose': ['হোস', 'পাইপ'], 
    'burner': ['বার্নার', 'বার্ণার'], 
    'foundry': ['ঢালাই', 'ফাউন্ড্রি'],
    'stone': ['পাথর', 'স্টোন'], 
    'brick': ['ইট', 'ব্রিক'], 
    'rolling': ['রোলিং', 'রোলিঙ'], 
    'equipment': ['ইকুইপমেন্ট', 'সরঞ্জাম'],
    'fiber': ['ফাইবার', 'তন্তু'], 
    'controller': ['কন্ট্রোলার', 'কন্ট্রোল'], 
    'all': ['যাবতীয়', 'সব', 'অল'],
    'taper': ['টেপার', 'ট্যাপার'], 
    'hole': ['হোল', 'ছিদ্র'], 
    'cord': ['কর্ড', 'তার'], 
    'conveyor': ['কনভেয়ার', 'কনভেয়ার-বেল্ট'],
    'graphite': ['গ্রাফাইট', 'গ্রাফাইট-রড'], 
    'bentonite': ['বেন্টোনাইট', 'বেন্টোনাইট-পাউডার'], 
    'manganese': ['ম্যাঙ্গানিজ', 'ম্যাঙ্গানীজ'],
    'cloth': ['ক্লোথ', 'কাপড়'], 
    'mold': ['মোল্ড', 'ছাঁচ'], 
    'design': ['ডিজাইন', 'নকশা'], 
    'press': ['প্রেস', 'চাপ'],
    'silver': ['সিলভার', 'রূপা'], 
    'pinion': ['পিনিয়ন', 'পিনীয়ন'], 
    'hardware': ['হার্ডওয়্যার', 'হার্ডঅয়্যার'],
    'agriculture': ['কৃষি', 'এগ্রিকালচার'], 
    'shearing': ['শেয়ারিং', 'শেয়ারিং'], 
    'drawing': ['ড্রয়িং', 'ড্রয়িং'],
    'heading': ['হেডিং', 'হেডিঙ'], 
    'workshop': ['ওয়ার্কশপ', 'ওয়ার্কশপ'], 
    'trolley': ['ট্রলি', 'ট্রলি-চাকা'],
    'bakelite': ['বেকোলাইট', 'বেকেলাইট'], 
    'acrylic': ['এক্রোলিক', 'এক্রিলিক'], 
    'brakeshoe': ['ব্রেক-সু', 'ব্রেকসু'],
    'circuit': ['সার্কিট', 'বর্তনী'], 
    'breaker': ['ব্রেকার', 'সার্কিট-ব্রেকার'], 
    'timer': ['টাইমার', 'সময়-গণক'],
    'repairing': ['রিপেয়ারিং', 'রিপেয়ারিং', 'মেরামত'], 
    'vibrator': ['ভাইব্রেটর', 'ভাইব্রেটার'], 
    'seal': ['সিল', 'সীল'],
    'piv': ['পিয়াইভি', 'পিআইভি'],

    # Batch 2 Repaired & Additional Terms (1-2)
    'bakery': ['বেকারি', 'বেকারী'], 
    'knitting': ['নিটিং', 'নিটিঙ'], 
    'garments': ['গার্মেন্টস', 'গার্মেন্ট'],
    'gi': ['জিআই', 'জি-আই'], 
    'needle': ['নিডল', 'সুঁই'], 
    'royal': ['রয়েল', 'রয়াল'], 
    'paper': ['পেপার', 'কাগজ'],
    'oilseal': ['অয়েলসিল', 'অয়েলসিল'], 
    'timing': ['টাইমিং', 'টাইমিঙ'], 
    'speed': ['স্পিড', 'গতি'],
    'endless': ['এন্ডলেস', 'অন্তহীন'], 
    'leather': ['লেদার', 'চামড়া'], 
    'synthetic': ['সিনথেটিক', 'সিন্থেটিক'],
    'v-belt': ['ভি-বেল্ট', 'ভিবেল্ট'], 
    'bricks': ['ব্রিকস', 'ইট'], 
    'telecom': ['টেলিকম', 'টেলিকমিউনিকেশন'],
    'gasket': ['গ্যাস্কেট', 'গ্যাসকেট'], 
    'tape': ['টেপ', 'টেপস্'], 
    'metal': ['মেটাল', 'ধাতু'], 
    'hanger': ['হ্যাঙ্গার', 'হ্যাংগার'],
    'spares': ['স্পেয়ার্স', 'খুচরা-যন্ত্রাংশ'], 
    'vertical': ['ভার্টিকাল', 'খাড়া'], 
    'fork': ['ফর্ক', 'কাঁটা'],
    'lift': ['লিফট', 'উত্তোলন'], 
    'japan': ['জাপান', 'জাপানি'], 
    'molding': ['মোল্ডিং', 'মোল্ডিঙ'],
    'transport': ['পরিবহন', 'ট্রান্সপোর্ট'], 
    'mixer': ['মিক্সার', 'মিক্সার-মেশিন'], 
    'factory': ['ফ্যাক্টরি', 'কারখানা'],
    'ton': ['টন', 'ওজন'], 
    'load-unload': ['লোড-আনলোড', 'মাল-খালাস'], 
    'chainblock': ['চেইনব্লক', 'চেনব্লক'],
    'coupling': ['কাপলিং', 'কাপলিঙ'], 
    'sprocket': ['স্প্রকেট', 'স্প্রকেট-হুইল'], 
    'polishing': ['পালিশ', 'পলিশিং'],
    'disc': ['ডিস্ক', 'ডিক্স'], 
    'round': ['গোল', 'রাউন্ড'], 
    'iron': ['আয়রন', 'লোহা', 'লৌহ'],
    'aluminum-p': ['এলুমিনিয়াম', 'অ্যালুমিনিয়াম'], 
    'clamp': ['ক্ল্যাম্প', 'ক্ল্যাম্পিং'], 
    'thread': ['সুতা', 'থ্রেড'],
    'hexagonal': ['হেক্সাগোনাল', 'ষড়ভুজ'], 
    'thin': ['চিকন', 'পাতলা'], 
    'stainless': ['স্টেইনলেস', 'মরিচাহীন'],
    'checker': ['চেকার', 'চেকার-প্লেট'], 
    'non-alloy': ['নন-এলোয়', 'নন-অ্যালয়'], 
    'stepping': ['স্টেপিং', 'ধাপ'],
    'flexible': ['ফ্লেক্সিবল', 'নমনীয়'], 
    'joint': ['জয়েন্ট', 'জোড়া'], 
    'cng': ['সিএঞ্জি', 'সিএনজি'],
    'o-ring': ['ও-রিং', 'ওরিং'], 
    'rice': ['রাইস', 'চাল'], 
    'dyeing': ['ডাইং', 'রঙ-করা'], 
    'finishing': ['ফিনিশিং', 'ফিনিশিঙ'],
    'gp': ['জি-পি', 'জিপি'], 
    'capacity': ['ক্যাপাসিটি', 'ক্ষমতা'], 
    'solder': ['রাং', 'সোল্ডার'], 
    'pine': ['পাইন', 'পাইন-কাঠ'],
    'insulation': ['ইনসুলেশন', 'অন্তরক'],

    # Batch 3 Repaired & Additional Terms (1)
    'material': ['ম্যাটেরিয়াল', 'মালামাল', 'উপাদান'], 
    'capacitor': ['ক্যাপাসিটর', 'ক্যাপাসিটার'], 
    'tips': ['টিপস', 'টিপস্'],
    'bit': ['বিট', 'ড্রিল-বিট'], 
    'tap': ['ট্যাপ', 'পানির-কল'], 
    'mobil': ['মবিল', 'লুব্রিকেন্ট'], 
    'grease': ['গ্রিজ', 'গ্রীজ'],
    'dewalt': ['ডিওয়াল্ট', 'ডিওয়াল্ট'], 
    'black-decker': ['ব্ল্যাক-এন্ড-ডেকার', 'ব্ল্যাক-অ্যান্ড-ডেকার'],
    'crown': ['ক্রাউন', 'মুকুট'], 
    'carbide-tips': ['কার্বাইড-টিপস', 'কার্বাইড'],
    'sliding': ['স্লাইডিং', 'স্লাইডিঙ'], 
    'gypsum': ['জিপসাম', 'জিপসম'], 
    'retail': ['খুচরা', 'রিটেইল'],
    'product': ['প্রোডাক্ট', 'পণ্য'], 
    'cable': ['ক্যাবল', 'তার'], 
    'punch': ['পাঞ্চ', 'পাঞ্চিং'],
    'nail': ['নেইল', 'পেরেক'], 
    'pallet': ['প্যালেট', 'প্যালেট-ট্রলি'],    
    'vacuum': ['ভ্যাকুয়াম', 'ভ্যাকুয়াম'], 
    'car-wash': ['কার-ওয়াস', 'গাড়ি-ধোয়া'], 
    'holder': ['হোল্ডার', 'হোল্ডার-পিন'],
    'clamp': ['ক্ল্যাম্প', 'ক্ল্যাম্পিং'], 
    'teflon': ['টেফলন', 'টেফ্লন'], 
    'tube': ['টিউব', 'নল'],
    'fittings': ['ফিটিংস', 'ফিটিঙস'], 
    'sealer': ['সিলার', 'সিলিং'], 
    'cloth': ['ক্লথ', 'কাপড়'],
    'polythene': ['পলি', 'পলিথিন'], 
    'digital': ['ডিজিটাল', 'ডিজিট্যাল'], 
    'analog': ['অ্যানালগ', 'এনালগ'],
    'magnetic': ['ম্যাগনেটিক', 'চৌম্বকীয়'], 
    'selector': ['সিলেক্টর', 'নির্বাচক'], 
    'indicator': ['ইন্ডিকেটর', 'সূচক'],
    'limit-switch': ['লিমিট-সুইচ', 'লিমিট-সুইজ'], 
    'immersion': ['ইমার্সন', 'ইমার্শন'],
    'electrical': ['ইলেক্ট্রিক্যাল', 'বৈদ্যুতিক'], 
    'supplies': ['সাপ্লাইস', 'সরবরাহ'],
    'freezer': ['ফ্রিজার', 'ফ্রিজ'], 
    'compressor': ['কম্প্রেসর', 'কম্প্রেসার'], 
    'dryer': ['ড্রায়ার', 'ড্রায়ার'],
    'submersible': ['সাবমার্সিবল', 'নিমজ্জিত'], 
    'safety': ['সেফটি', 'নিরাপত্তা'], 
    'inverter': ['ইনভার্টার', 'ইনভার্টার-মেশিন'],
    'starter': ['স্টার্টার', 'স্টার্টার-মটর'], 
    'gear': ['গিয়ার', 'গীয়ার'], 
    'ac-dc': ['এসি-ডিসি', 'এসি/ডিসি'],
    'gearbox': ['গিয়ারবক্স', 'গীয়ারবক্স'], 
    're-condition': ['রি-কন্ডিশন', 'রিকন্ডিশন', 'পুরাতন'],
    'irrigation': ['ইরিগেশন', 'সেচ'], 
    'thruster': ['থ্রাস্টার', 'থ্রাস্টার-মটর'], 
    'main': ['মেইন', 'প্রধান'],
    'drum-fan': ['ড্রাম-ফ্যান', 'ড্রামফ্যান'], 
    'food': ['ফুড', 'খাদ্য'], 
    'beverage': ['বেভারেজ', 'পানীয়'],
    'specialist': ['স্পেশালিস্ট', 'বিশেষজ্ঞ'], 
    'reactor': ['রিযেক্টর', 'রিয়েক্টর'], 
    'regulator': ['রেগুলেটর', 'নিয়ামক'],
    'ammonia': ['অ্যামোনিয়া', 'অ্যামোনিয়া'], 
    'acid': ['এসিড', 'অ্যাসিড'], 
    'cylinder': ['সিলিন্ডার', 'সিলিন্ডার-গ্যাস'],
    'seamless': ['সিমলেস', 'সিমলেস-পাইপ'], 
    'bulb': ['বাল্ব', 'লাইট'], 
    'fancy': ['ফেন্সি', 'ফ্যান্সি'],
    'bearing': ['বেয়ারিং', 'বিয়ারিং', 'বেয়ারিঙ', 'বিয়ারিঙ'], 
    'scales': ['স্কেলস', 'ওজন-মাপার-যন্ত্র'], 
    'thrust': ['থ্রাস্ট', 'থ্রাস্ট-বেয়ারিং'],
    'authorized': ['অথরাইজড', 'অনুমোদিত', 'অথোরাইজড'], 
    'fag': ['ফ্যাগ', 'এফএজি'], 
    'roller-bearing': ['রোলার-বিয়ারিং', 'রোলার-বেয়ারিং'],
    'nck': ['এনসিকে', 'এন-সি-কে'], 
    'washer': ['ওয়াসার', 'ওয়াশার'], 
    'fan': ['ফ্যান', 'পাখা'],
    'tv-antenna': ['টিভি-এন্টেনা', 'অ্যান্টেনা'], 
    'allen-key': ['এল-কি', 'এলেন-কি', 'অ্যালেনকী'],
    'spring-washer': ['স্প্রিং-ওয়াসার', 'স্প্রিং-ওয়াশার'], 
    'mudguard': ['মার্ডগার্ড', 'মাডগার্ড'],
    'star': ['স্টার', 'তারা'], 
    'axle': ['এক্সেল', 'অ্যাক্সেল'], 
    'hard': ['হার্ড', 'শক্ত'], 
    'ebonite': ['এবোনাইট', 'ইবোনাইট'],
    'filter': ['ফিল্টার', 'ছাঁকনী'], 
    'liner': ['লাইনার', 'লাইনার-বিয়ার'], 
    'v-belt': ['ভি-বেল্ট', 'ভিবেল্ট'],
    'transmission': ['ট্রান্সমিশন', 'শক্তি-সঞ্চালন'], 
    'synchronous': ['সিনক্রোনাস', 'সিংক্রোনাস'],
    'variable': ['ভ্যারিয়েবল', 'পরিবর্তনশীল'], 
    'rotor': ['রোটর', 'রোটর-মটর'], 
    'automotive': ['অটোমোটিভ', 'গাড়ি-সংক্রান্ত'],
    'coupling': ['কাপলিং', 'কাপলিঙ'], 
    'gallon': ['গ্যালন', 'গ্যালন-মাপ'], 
    'chair': ['চেয়ার', 'আসন'],
    'cap': ['ক্যাপ', 'টুপি'], 
    'mechanical': ['মেকানিক্যাল', 'যান্ত্রিক'], 
    'flat': ['ফ্লাট', 'ফ্ল্যাট'],
    'belting': ['বেল্টিং', 'বেল্টিঙ'], 
    'asbestos': ['এসব্রেটরস', 'এজবেস্টস'], 
    'felt': ['ফেল্ট', 'ফেল্ট-শীট'],
    'rock': ['রক', 'পাথর'], 
    'foil': ['ফয়েল', 'ফয়েল'], 
    'glass-wool': ['গ্লাস-উল', 'কাঁচ-উল'],
    'india': ['ইন্ডিয়া', 'ভারত'], 
    'pig-iron': ['পিগ', 'পিগ-আইরন'], 
    'borax': ['সোহাগা', 'বোরাক্স'],
    'white': ['হোয়াইট', 'সাদা'], 
    'tata': ['টাটা', 'টাটা-স্টিল'],

    # Batch 5 & 6 Repaired & Additional Terms
    'railing': ['রিলিং', 'রেলিং'], 
    'mosaic': ['মোজাইক', 'মোজায়েক'], 
    'stick': ['স্টিক', 'লাঠি'],
    'furniture': ['ফার্নিচার', 'আসবাবপত্র'], 
    'curtain': ['পর্দা', 'কার্টেন'], 
    'socket': ['সকেট', 'প্লাগ'],
    'hanger': ['হ্যাঙ্গার', 'হ্যাংগার'], 
    'thai': ['থাই', 'থাইল্যান্ড'], 
    'zipper': ['জিপার', 'চেইন'],
    'floor': ['ফ্লোর', 'মেঝে'], 
    'tiles': ['টাইলস', 'টাইলস্'], 
    'copper': ['তামা', 'কপার'],
    'project': ['প্রজেক্ট', 'প্রকল্প'], 
    'drawing': ['ড্রয়িং', 'নকশা'], 
    'solar': ['সোলার', 'সৌর-শক্তি'],
    'melamine': ['মেলামাইন', 'মেলামাইন-পণ্য'], 
    'shoe': ['জুতা', 'সু'], 
    'hardchrome': ['হার্ডক্রোম', 'হার্ড-ক্রোম'],
    'alloy': ['এলোয়', 'অ্যালয়'], 
    'logo': ['লোগো', 'প্রতীক'], 
    'printer': ['প্রিন্টার', 'প্রিন্টিং-মেশিন'],
    'boring': ['বোরিং', 'বোরিঙ'], 
    'grinder': ['গ্রাইন্ডার', 'গ্রান্ডার'], 
    'germany': ['জার্মানি', 'জার্মান'],
    'taiwan': ['তাইওয়ান', 'তাইওয়ানিজ'], 
    'compound': ['কম্পাউন্ড', 'যৌগ'], 
    'door': ['দরজা', 'ডোর'],
    'roaster': ['রোস্টার', 'রোস্টিং-মেশিন'], 
    'ballpen': ['বলপেন', 'কলম'], 
    'wax': ['মোম', 'ওয়াক্স'],
    'packaging': ['প্যাকিং', 'প্যাকেজিং'], 
    'sugar': ['চিনি', 'সুগার'], 
    'cake': ['কেক', 'পিঠা'],
    'spiral': ['স্পাইরাল', 'স্পাইরাল-বাইন্ডিং'], 
    'chainblock': ['চেইনব্লক', 'চেনব্লক'], 
    'dryer': ['ড্রায়ার', 'ড্রায়ার'],
    'reducer': ['রিডিউসার', 'রিডিউশার'], 
    'marine': ['মেরিন', 'সামুদ্রিক'], 
    'machinery': ['মেশিনারি', 'যন্ত্রপাতি'],
    'knife': ['ছুরি', 'নাইফ'], 
    'printing': ['প্রিন্টিং', 'ছাপা'], 
    'handle': ['হ্যান্ডেল', 'হাতল'],
    'rotor': ['রোটর', 'রোটর-মটর'], 
    'steam': ['স্টিম', 'বাষ্প'], 
    'shackle': ['শ্যাকেল', 'শ্যাকেল-পিন'],
    'brake': ['ব্রেক', 'ব্রেক-সিস্টেম'], 
    'brake-shoe': ['ব্রেক-সু', 'ব্রেকসু'], 
    'fuel': ['ফুয়েল', 'জ্বালানি'],
    'battery': ['ব্যাটারি', 'ব্যাটারী'], 
    'differential': ['ডিফারেনশিয়াল', 'ডিফারেন্সিয়াল'],
    'hardening': ['হার্ডেনিং', 'শক্ত-করা'], 
    'tempering': ['টেম্পারিং', 'টেম্পারিঙ'],
    'ice': ['বরফ', 'আইস'], 
    'ice-cream': ['আইসক্রিম', 'মালাই'], 
    'manufacturer': ['প্রস্তুতকারক', 'প্রস্তুতকারী', 'ম্যানুফ্যাকচারার'],
    'tea': ['চা-পাতা', 'চা'], 
    'spares': ['স্পেয়ার্স', 'খুচরা-যন্ত্রপাতি'], 
    'agro': ['এগ্রো', 'কৃষি'],
    'tobacco': ['টোব্যাকো', 'তামাক'], 
    'sugar-mill': ['চিনি-কল', 'সুগার-মিল'], 
    'glasswool': ['গ্লাসউল', 'গ্লাস-উল'],
    'casing': ['কেসিং', 'কেসিঙ'], 
    'machinery-parts': ['যন্ত্রপাতি', 'পার্টস'],
    'd-cut': ['ডি-কাট', 'ডিকাট'], 
    'shackle-d': ['ডি-সাকেল', 'ডি-শ্যাকেল'], 
    'fuel-pump': ['ফুয়েল-পাম্প', 'ফুয়েলপাম্প'], 
    'agro-machinery': ['এগ্রো-মেশিনারি', 'কৃষি-যন্ত্রপাতি'],
    'tobacco-industry': ['টোব্যাকো-ইন্ডাস্ট্রি', 'তামাক-শিল্প'], 
    'sugar-plant': ['সুগার-প্ল্যান্ট', 'চিনি-কারখানা'],

    # Batch 7: Sanitary, Valves & Plumbing
    'sanitary': ['স্যানিটারি', 'স্যানিটারি-ফিটিংস'],
    'commode': ['কমোড', 'প্যান'], 
    'basin': ['বেসিন', 'বেছিন'],
    'pan': ['প্যান', 'লো-প্যান'], 
    'sink': ['সিংক', 'সিঙ্ক'],
    'valve': ['ভালভ', 'বাল্ব', 'ভালব'], 
    'cock': ['কক', 'কল'], 
    'bib-cock': ['বিব-কক', 'বিবকক'],
    'stop-cock': ['স্টপ-কক', 'স্টপকক'], 
    'elbow': ['এলবো', 'কনুই'],
    'tee': ['টি', 'টি-সকেট'], 
    'union': ['ইউনিয়ন', 'ইউনিয়ন'], 
    'nipple': ['নিপল', 'নিপেল'],
    
    # Batch 8: Specific Engine & Machine Parts
    'crankshaft': ['ক্র্যাঙ্কশ্যাফট', 'ক্রাংকশ্যাফট'], 
    'piston': ['পিস্টন', 'পিসটন'],
    'nozzle': ['নজেল', 'নজল'], 
    'plunger': ['প্লাঞ্জার', 'প্লাঞ্জর'],
    'radiator': ['রেডিয়েটর', 'রেডিয়েটর'], 
    'excavator': ['ভেকু', 'এক্সেভেটর', 'মাটি-কাটা-মেশিন'],
    'shallow': ['শ্যালো', 'শ্যালো-মেশিন'], 
    'scale': ['পাল্লা', 'দাঁড়িপাল্লা', 'ওজন-মাপার-যন্ত্র'],
    'marine-engine': ['মেরিন-ইঞ্জিন', 'জাহাজের-ইঞ্জিন']
}

def normalize_bengali(text):
    if not text:
        return ""
    
    # Character maps usually considered phonetically similar in search context
    replacements = [
        # Vowels (Normalize long to short)
        ('ী', 'ি'),
        ('ূ', 'ু'),
        (' ঋ', ' র'), # ऋ to র
        ('ঋ', 'রি'), # Common phonetic representation
        
        # Consonants 
        ('ণ', 'ন'), # Murdhanya to Dantya
        ('ষ', 'স'), # Murdhanya Sha to Dantya Sa
        ('শ', 'স'), # Talabya Sha to Dantya Sa
        ('জ', 'য'), # Ja to Ya (often confused)
        ('য', 'জ'), # Consistently use one (Ja)
        ('ড়', 'র'), # Da-bindu Ra to Ra
        ('ঢ়', 'র'), # Dha-bindu Ra to Ra
        ('ৎ', 'ত'), # Khanda-ta to Ta
        ('য়', 'য'), # Antastha-Ya
        
        # Nasals & Symbols
        ('ং', 'ঙ'), # Anusvara to Nga
        ('ঃ', ''), # Visarga (often silent/geminate, removing for rough match)
        ('ঁ', ''), # Chandrabindu (optional nasalization, often ignored in search)
        
        # Phalas & Extensions
        ('্য', ''), # Ya-phala (e.g., ব্যাবসা -> ব্যবসা)
        ('্ব', ''), # Ba-phala
        ('হ্ম', 'ম্ম'), # Brahman -> Bamman (phonetic)
    ]
    
    norm_text = text
    for old, new in replacements:
        norm_text = norm_text.replace(old, new)
        
    return norm_text

def normalize_text(text):
    if not text:
        return ""
    
    text = str(text).lower().strip()
    
    text = normalize_bengali(text)
    
    return text

def custom_tokenizer(text):
    tokens = list(tokenize(text))
    augmented = []
    for t in tokens:
        augmented.append(t)
        if t.lower() in DOMAIN_MAP:
            mapping = DOMAIN_MAP[t.lower()]
            if isinstance(mapping, list):
                augmented.extend(mapping)
            else:
                augmented.append(mapping)
            
    return augmented

def tokenize(text):
    norm = normalize_text(text)
    tokens = re.split(r'\s+|[,;.]+', norm)
    return set(t for t in tokens if t)

def calculate_score(shop, query_tokens, normalized_query):
    score = 0
    shop_name = normalize_text(shop['name'])
    shop_products = normalize_text(shop['products'] or "")
    shop_tags_list = [normalize_text(t['name']) for t in shop['tags']]
    shop_tags_bn_list = [normalize_text(t['name_bn']) for t in shop['tags'] if t['name_bn']]
    
    all_shop_text = f"{shop_name} {shop_products} {' '.join(shop_tags_list)} {' '.join(shop_tags_bn_list)}"
    shop_tokens = tokenize(all_shop_text)
    
    if normalized_query in all_shop_text:
        score += 50
        # Boost if in name
        if normalized_query in shop_name:
            score += 30
            
    matches = 0
    query_token_count = len(query_tokens)
    
    for q_token in query_tokens:
        token_found = False
        
        if q_token in shop_tokens:
            matches += 1
            score += 20 # Increased from 10
            token_found = True
        else:
            
            for s_token in shop_tokens:
                if len(q_token) > 3 and s_token.startswith(q_token):
                     matches += 0.5
                     score += 5
                     token_found = True
                     break
                # Allow substring match only for very long tokens?
                elif len(q_token) > 4 and q_token in s_token:
                     matches += 0.5
                     score += 5 
                     token_found = True
                     break
        
    if matches >= query_token_count and query_token_count > 0:
        score += 100 
        
    if query_token_count > 1:
        ratio = matches / query_token_count
        if ratio <= 0.5:
             return 0
             
    return score
