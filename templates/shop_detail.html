{% extends 'base.html' %}

{% block title %}{{ shop.name }} - ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ‡¶¶‡ßá‡¶∂ ‡¶á‡¶û‡ßç‡¶ú‡¶ø‡¶®‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶ï‡¶∂‡¶™{% endblock %}

{% block content %}
<section class="shop-detail">
    <div class="shop-detail-header">
        <h1>{{ shop.name }}</h1>
        {% if shop.category_name %}
        <a href="{{ url_for('category_shops', category_id=shop.category_id) }}" class="category-badge large">
            {{ shop.category_name }}
        </a>
        {% endif %}
    </div>

    <div class="shop-detail-body">
        <div class="detail-grid">

            <!-- Products Card (First) -->
            <div class="detail-card">
                <h3>üì¶ {{ _('Products List') }}</h3>
                <div class="products-content">
                    {{ shop.products or _('No products list available') }}
                </div>
            </div>

            <!-- Business Info Card (Middle) -->
            <div class="detail-card">
                <h3> {{ _('Business Info') }}</h3>

                <div class="detail-row">
                    <div class="detail-label">{{ _('Proprietor') }}:</div>
                    <div class="detail-value">{{ shop.proprietor or '-' }}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">{{ _('Online Transaction') }}:</div>
                    <div class="detail-value">{{ shop.transaction_status or '-' }}</div>
                </div>
            </div>

            <!-- Contact Info Card (Last) -->
            <div class="detail-card">
                <h3>üìû ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</h3>

                <div class="detail-row">
                    <div class="detail-label">üìç ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ:</div>
                    <div class="detail-value">{{ shop.address or '-' }}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">ÔøΩ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤:</div>
                    <div class="detail-value">
                        {% if shop.mobile %}
                        {% for num in shop.mobile.split() %}
                        <a href="tel:{{ num }}" class="phone-link">{{ num }}</a>
                        {% endfor %}
                        {% else %}
                        -
                        {% endif %}
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">ÔøΩ ‡¶π‡ßã‡¶Ø‡¶º‡¶æ‡¶ü‡¶∏‡¶è‡¶™:</div>
                    <div class="detail-value">
                        {% if shop.whatsapp %}
                        <a href="https://wa.me/{{ shop.whatsapp.replace('-', '').replace(' ', '') }}" target="_blank"
                            class="whatsapp-link">
                            {{ shop.whatsapp }}
                        </a>
                        {% else %}
                        -
                        {% endif %}
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">üìß {{ _('Email/Web') }}:</div>
                    <div class="detail-value">
                        {% set contact = shop.email_web | parse_contact_info %}
                        {% if contact.type == 'email' %}
                        <a href="mailto:{{ contact.value }}" class="email-link">{{ contact.value }}</a>
                        {% elif contact.type == 'web' %}
                        <a href="{{ contact.value if 'http' in contact.value else 'http://' + contact.value }}"
                            target="_blank" class="web-link">{{ contact.value }}</a>
                        {% else %}
                        {{ contact.value }}
                        {% endif %}
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="shop-detail-actions">
        <a href="{{ url_for('edit_shop', shop_id=shop.id) }}" class="btn btn-primary">‚úèÔ∏è {{ _('Edit') }}</a>
        <form action="{{ url_for('delete_shop', shop_id=shop.id) }}" method="POST" class="delete-form"
            onsubmit="return confirm('{{ _('Are you sure you want to delete this shop?') }}');">
            <button type="submit" class="btn btn-danger">üóëÔ∏è {{ _('Delete') }}</button>
        </form>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">‚Üê {{ _('Back') }}</a>
    </div>
</section>
{% endblock %}